<p style="color: green"><%= notice %></p>

<h1>
  Members RSVP'd for event: <%= @event.name%>
  <br>
  Capacity: <%= @attendees.count %> / 
  <% if @event.capacity == nil %>
    Unlimited
  <% else %>
    <%= @event.capacity %>
  <% end %>
</h1>


<div id="attendees">
  <% @attendees.each do |attendee| %>
    <% member = Member.find(attendee.member_id) %>
    <p> <strong>Name:</strong>
    <%= member.first_name + " " + member.last_name + " " %>
    <% if attendee.member_id == current_member.member_id %>
      <%= link_to("Delete RSVP", delete_event_attendee_path(@event, attendee), class: 'action delete') %>
    <% end %> 
    <br>
    <%# Renders the check in feature if the current user is not a member %>
    <% if Role.find(MemberRole.find(current_member.member_id).role_id).name != "Member" %>
      <% if !attendee.attended %>
        <%= "Member has not been checked in" %>
        <%= link_to "Check Member In", edit_event_attendee_path(@event, attendee), class: 'action edit' %>
      <% else %>
        <%= "Member is checked in" %>
        <%= link_to "Uncheck Member", edit_event_attendee_path(@event, attendee), class: 'action edit' %>
      <% end %>
    <% end %>
    </p>
  <% end %>
</div>

<%= link_to "Back to Events", events_path %>
